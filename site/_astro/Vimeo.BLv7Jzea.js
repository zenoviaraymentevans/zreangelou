import{r as p,R as l}from"./index.DddtCxX5.js";import{g as h,c as u,b as c}from"./Player._u6h4luJ.js";import"./jsx-runtime.CIMolHGP.js";import"./index.DpKhS-qi.js";/* empty css                       */import"./index.B0vZmPab.js";import"./index.Py3gQaBW.js";import"./index.DtUZoKqR.js";import"./index.Dp8Bw2RJ.js";import"./store.aycOQVLs.js";import"./index.bM7OrN6I.js";import"./player.CKjfIk3N.js";var d=Object.defineProperty,y=(o,t,e)=>t in o?d(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,s=(o,t,e)=>(y(o,typeof t!="symbol"?t+"":t,e),e);const m="https://player.vimeo.com/api/player.js",f="Vimeo",P=o=>o.replace("/manage/videos","");class i extends p.Component{constructor(){super(...arguments),s(this,"callPlayer",u),s(this,"duration",null),s(this,"currentTime",null),s(this,"secondsLoaded",null),s(this,"mute",()=>{this.setMuted(!0)}),s(this,"unmute",()=>{this.setMuted(!1)}),s(this,"ref",t=>{this.container=t})}componentDidMount(){this.props.onMount&&this.props.onMount(this)}load(t){this.duration=null,h(m,f).then(e=>{if(!this.container)return;const{playerOptions:n,title:a}=this.props.config;this.player=new e.Player(this.container,{url:P(t),autoplay:this.props.playing,muted:this.props.muted,loop:this.props.loop,playsinline:this.props.playsinline,controls:this.props.controls,...n}),this.player.ready().then(()=>{const r=this.container.querySelector("iframe");r.style.width="100%",r.style.height="100%",a&&(r.title=a)}).catch(this.props.onError),this.player.on("loaded",()=>{this.props.onReady(),this.refreshDuration()}),this.player.on("play",()=>{this.props.onPlay(),this.refreshDuration()}),this.player.on("pause",this.props.onPause),this.player.on("seeked",r=>this.props.onSeek(r.seconds)),this.player.on("ended",this.props.onEnded),this.player.on("error",this.props.onError),this.player.on("timeupdate",({seconds:r})=>{this.currentTime=r}),this.player.on("progress",({seconds:r})=>{this.secondsLoaded=r}),this.player.on("bufferstart",this.props.onBuffer),this.player.on("bufferend",this.props.onBufferEnd),this.player.on("playbackratechange",r=>this.props.onPlaybackRateChange(r.playbackRate))},this.props.onError)}refreshDuration(){this.player.getDuration().then(t=>{this.duration=t})}play(){const t=this.callPlayer("play");t&&t.catch(this.props.onError)}pause(){this.callPlayer("pause")}stop(){this.callPlayer("unload")}seekTo(t,e=!0){this.callPlayer("setCurrentTime",t),e||this.pause()}setVolume(t){this.callPlayer("setVolume",t)}setMuted(t){this.callPlayer("setMuted",t)}setLoop(t){this.callPlayer("setLoop",t)}setPlaybackRate(t){this.callPlayer("setPlaybackRate",t)}getDuration(){return this.duration}getCurrentTime(){return this.currentTime}getSecondsLoaded(){return this.secondsLoaded}render(){const{display:t}=this.props,e={width:"100%",height:"100%",overflow:"hidden",display:t};return l.createElement("div",{key:this.props.url,ref:this.ref,style:e})}}s(i,"displayName","Vimeo");s(i,"canPlay",c.vimeo);s(i,"forceLoad",!0);export{i as default};
