import{r as d,R as m}from"./index.DddtCxX5.js";import{g as c,c as f,b as y}from"./Player._u6h4luJ.js";import"./jsx-runtime.CIMolHGP.js";import"./index.DpKhS-qi.js";/* empty css                       */import"./index.B0vZmPab.js";import"./index.Py3gQaBW.js";import"./index.DtUZoKqR.js";import"./index.Dp8Bw2RJ.js";import"./store.aycOQVLs.js";import"./index.bM7OrN6I.js";import"./player.CKjfIk3N.js";var P=Object.defineProperty,g=(o,t,r)=>t in o?P(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r,e=(o,t,r)=>(g(o,typeof t!="symbol"?t+"":t,r),r);const b="https://w.soundcloud.com/player/api.js",R="SC";class s extends d.Component{constructor(){super(...arguments),e(this,"callPlayer",f),e(this,"duration",null),e(this,"currentTime",null),e(this,"fractionLoaded",null),e(this,"mute",()=>{this.setVolume(0)}),e(this,"unmute",()=>{this.props.volume!==null&&this.setVolume(this.props.volume)}),e(this,"ref",t=>{this.iframe=t})}componentDidMount(){this.props.onMount&&this.props.onMount(this)}load(t,r){c(b,R).then(n=>{if(!this.iframe)return;const{PLAY:a,PLAY_PROGRESS:l,PAUSE:p,FINISH:u,ERROR:h}=n.Widget.Events;r||(this.player=n.Widget(this.iframe),this.player.bind(a,this.props.onPlay),this.player.bind(p,()=>{this.duration-this.currentTime<.05||this.props.onPause()}),this.player.bind(l,i=>{this.currentTime=i.currentPosition/1e3,this.fractionLoaded=i.loadedProgress}),this.player.bind(u,()=>this.props.onEnded()),this.player.bind(h,i=>this.props.onError(i))),this.player.load(t,{...this.props.config.options,callback:()=>{this.player.getDuration(i=>{this.duration=i/1e3,this.props.onReady()})}})})}play(){this.callPlayer("play")}pause(){this.callPlayer("pause")}stop(){}seekTo(t,r=!0){this.callPlayer("seekTo",t*1e3),r||this.pause()}setVolume(t){this.callPlayer("setVolume",t*100)}getDuration(){return this.duration}getCurrentTime(){return this.currentTime}getSecondsLoaded(){return this.fractionLoaded*this.duration}render(){const{display:t}=this.props,r={width:"100%",height:"100%",display:t};return m.createElement("iframe",{ref:this.ref,src:`https://w.soundcloud.com/player/?url=${encodeURIComponent(this.props.url)}`,style:r,frameBorder:0,allow:"autoplay"})}}e(s,"displayName","SoundCloud");e(s,"canPlay",y.soundcloud);e(s,"loopOnEnded",!0);export{s as default};
