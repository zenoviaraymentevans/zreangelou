import{r as a,R as C,t as v}from"./index.DddtCxX5.js";import{p as S,o as F}from"./use-disposables.CSnXTm91.js";import{n as y,s as p}from"./use-sync-refs.CdR1_aZG.js";function E(e=0){let[t,n]=a.useState(e),l=a.useCallback(r=>n(r),[t]),s=a.useCallback(r=>n(i=>i|r),[t]),o=a.useCallback(r=>(t&r)===r,[t]),c=a.useCallback(r=>n(i=>i&~r),[n]),u=a.useCallback(r=>n(i=>i^r),[n]);return{flags:t,setFlag:l,addFlag:s,hasFlag:o,removeFlag:c,toggleFlag:u}}var x=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(x||{});function P(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function L(e,t,n,l){let[s,o]=a.useState(n),{hasFlag:c,addFlag:u,removeFlag:r}=E(e&&s?3:0),i=a.useRef(!1),d=a.useRef(!1),h=S();return y(()=>{var g;if(e){if(n&&o(!0),!t){n&&u(3);return}return(g=l?.start)==null||g.call(l,n),b(t,{inFlight:i,prepare(){d.current?d.current=!1:d.current=i.current,i.current=!0,!d.current&&(n?(u(3),r(4)):(u(4),r(2)))},run(){d.current?n?(r(3),u(4)):(r(4),u(3)):n?r(1):u(1)},done(){var m;d.current&&typeof t.getAnimations=="function"&&t.getAnimations().length>0||(i.current=!1,r(7),n||o(!1),(m=l?.end)==null||m.call(l,n))}})}},[e,n,t,h]),e?[s,{closed:c(1),enter:c(2),leave:c(4),transition:c(2)||c(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function b(e,{prepare:t,run:n,done:l,inFlight:s}){let o=F();return O(e,{prepare:t,inFlight:s}),o.nextFrame(()=>{n(),o.requestAnimationFrame(()=>{o.add(k(e,l))})}),o.dispose}function k(e,t){let n=F();if(!e)return n.dispose;let l=!1;n.add(()=>{l=!0});let s=e.getAnimations().filter(o=>o instanceof CSSTransition);return s.length===0?(t(),n.dispose):(Promise.allSettled(s.map(o=>o.finished)).then(()=>{l||t()}),n.dispose)}function O(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let l=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=l}let f=a.createContext(null);f.displayName="OpenClosedContext";var $=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))($||{});function j(){return a.useContext(f)}function q({value:e,children:t}){return C.createElement(f.Provider,{value:e},t)}function M({children:e}){return C.createElement(f.Provider,{value:null},e)}function A(){let e=typeof document>"u";return"useSyncExternalStore"in v?(t=>t.useSyncExternalStore)(v)(()=>()=>{},()=>!1,()=>!e):!1}function T(){let e=A(),[t,n]=a.useState(p.isHandoffComplete);return t&&p.isHandoffComplete===!1&&n(!1),a.useEffect(()=>{t!==!0&&n(!0)},[t]),a.useEffect(()=>p.handoff(),[]),e?!1:t}export{P as H,q as c,$ as i,L as j,T as l,M as s,j as u};
